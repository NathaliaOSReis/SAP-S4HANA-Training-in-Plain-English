## ğŸ”¹ O que Ã© um Ã­ndice no banco de dados?

Um Ã­ndice Ã© uma estrutura auxiliar (como o Ã­ndice de um livro) que ajuda o banco de dados a encontrar registros rapidamente sem precisar varrer toda a tabela linha por linha (full table scan).

Ele Ã© criado sobre uma ou mais colunas de uma tabela.

Exemplo: se vocÃª sempre busca materiais pelo MATNR (cÃ³digo do material), o SAP cria um Ã­ndice sobre essa coluna em MARA.

## ğŸ”¹ Por que os Ã­ndices eram necessÃ¡rios no SAP ECC?

**1. Performance**

Os bancos tradicionais (Oracle, SQL Server, DB2) armazenavam dados em disco, e varrer milhÃµes de registros era muito lento.

Ãndices reduziam o tempo de busca drasticamente.

**2. Consultas frequentes**

Documentos financeiros, logÃ­sticos e de vendas precisavam ser consultados e conciliados com frequÃªncia.

Exemplo: relatÃ³rios de saldos de contas precisavam de BSIS (Ã­ndice de saldos abertos), em vez de recalcular tudo em cima do BKPF/BSEG a cada consulta.

**3. RelatÃ³rios e integraÃ§Ãµes**

Muitas consultas eram analÃ­ticas (saldos, totais, histÃ³ricos). Para nÃ£o sobrecarregar as tabelas bÃ¡sicas, os Ã­ndices funcionavam como cÃ³pias resumidas.

ğŸ‘‰ Resumindo: os Ã­ndices existiam para **compensar a limitaÃ§Ã£o de hardware e dos bancos de dados relacionais.**

## ğŸ”¹ O que muda no SAP S/4HANA?

O SAP HANA Ã© um banco in-memory columnar (colunar na memÃ³ria), que jÃ¡ traz performance muito alta para consultas analÃ­ticas e transacionais.

Ele nÃ£o precisa de tabelas de Ã­ndice redundantes, porque consegue:

- Buscar registros rapidamente usando armazenamento em colunas.

- Fazer agregaÃ§Ãµes em tempo real (sum, avg, count etc.) sem tabelas intermediÃ¡rias.

- Manter apenas uma fonte Ãºnica de dados (ex.: a tabela ACDOCA substitui vÃ¡rias antigas de FI/CO).

ğŸ‘‰ Por isso, no S/4HANA, as index tables foram eliminadas. Hoje se usa views (CDS views) para consultas otimizadas sem redundÃ¢ncia.

ğŸ“Œ Resumo para anotaÃ§Ãµes:

- Ãndices eram necessÃ¡rios no ECC porque os bancos relacionais eram lentos â†’ evitavam full scans e guardavam resultados prÃ©-calculados.

- No HANA, a performance Ã© garantida pelo design in-memory e column-store, entÃ£o nÃ£o precisamos de tabelas de Ã­ndice redundantes.

## ğŸ”¹ O que significa VBAK e outras â€œtablesâ€ do SAP

- No **SAP**, cada tabela tem um nome tÃ©cnico (geralmente 4 ou 5 letras) e guarda dados especÃ­ficos.

Exemplo clÃ¡ssico:

- **VBAK** â†’ Sales Document: Header Data (cabeÃ§alho do pedido de vendas)

- **VBAP** â†’ Sales Document: Item Data (itens do pedido de vendas)

- **BKPF** â†’ CabeÃ§alho de documento contÃ¡bil (FI)

- **BSEG** â†’ Linhas de documento contÃ¡bil (FI)

- **MARA** â†’ Dados mestre de material

ğŸ‘‰ Essas sÃ£o basic tables â†’ as tabelas originais onde os dados sÃ£o gravados no momento da transaÃ§Ã£o.

## ğŸ”¹ Como VBAK se relaciona com os conceitos que vimos

#### **1. Basic Tables**

- VBAK Ã© um exemplo perfeito de basic table.

- Quando vocÃª cria um pedido de vendas no SAP (SD), o cabeÃ§alho vai para a VBAK, e os itens vÃ£o para VBAP.

- Essas tabelas sempre existiram e continuam existindo no S/4HANA.

#### **2.Index Tables (ECC, antes do S/4HANA)**

- Antes do HANA, se alguÃ©m pedisse: â€œListe todos os pedidos de vendas do cliente X que jÃ¡ foram entregues mas nÃ£o faturadosâ€, o sistema precisaria varrer VBAK + VBAP + LIKP + VBRK (muitas tabelas, milhÃµes de registros).

- Para acelerar, o SAP criava index tables que jÃ¡ tinham essa informaÃ§Ã£o prÃ©-calculada.

- Exemplo em FI: BSIS (Ã­ndice de documentos abertos).

ğŸ‘‰ No S/4HANA, isso desapareceu â†’ o HANA consegue juntar VBAK, VBAP, etc. em tempo real via CDS Views.

#### **3.LIS Tables (Logistics Information System)**

- Ainda no ECC, existiam tabelas LIS como S001, S002 que guardavam estatÃ­sticas de vendas (quantos pedidos, faturamento por cliente, etc.).

- Essas tabelas eram â€œsumÃ¡riosâ€ baseados em dados de VBAK/VBAP.

- No S/4HANA, isso foi substituÃ­do por analytics embarcados, sem LIS tables.

#### **4.Status Tables**

- Um pedido de vendas (em VBAK/VBAP) precisa de status: â€œabertoâ€, â€œliberado para entregaâ€, â€œfaturadoâ€, etc.

- Isso Ã© guardado em status tables como VBUK (status do documento de vendas) e VBUP (status de item).

- Essas ainda existem no S/4HANA porque sÃ£o necessÃ¡rias para o processo.

## ğŸ”¹ Linha do tempo para anotar

ğŸ‘‰ ECC (antigo)

- Criava o pedido â†’ gravava em VBAK/VBAP (basic tables).

- Para relatÃ³rios rÃ¡pidos â†’ usava index tables (BSIS, KONV, etc.).

- Para estatÃ­sticas logÃ­sticas â†’ usava LIS tables (S001, S002, etc.).

ğŸ‘‰ S/4HANA (novo)

- Continua gravando no VBAK/VBAP.

- Index tables e LIS tables foram eliminadas.

- Tudo Ã© feito em tempo real via HANA + CDS Views + Fiori apps.

- Status tables (VBUK, VBUP, JEST) continuam existindo.

ğŸ“Œ Resumo prÃ¡tico:

- VBAK = basic table (cabeÃ§alho de pedidos de vendas).

- VBAP = basic table (itens de pedidos de vendas).

- VBUK/VBUP = status tables relacionadas a VBAK/VBAP.

- No ECC, relatÃ³rios sobre VBAK/VBAP usavam index e LIS tables para nÃ£o pesar no banco.

- No S/4HANA, essas redundÃ¢ncias sumiram â†’ HANA faz tudo em tempo real.