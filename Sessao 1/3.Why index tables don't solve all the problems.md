## 🔹 Contexto

- No SAP ECC, os bancos de dados relacionais (Oracle, SQL Server, DB2 etc.) eram lentos para processar relatórios diretamente das basic tables (como VBAK, BKPF, MARA).

- Para melhorar performance, foram criadas as index tables, que guardavam cópias pré-calculadas ou resumidas de dados.

- Exemplo: BSIS (FI), KONV (SD), VBRK/VBRP (Billing).

## 🔹 Por que index tables não resolvem tudo

#### **1. Redundância de dados**

O mesmo dado aparece em múltiplas tabelas (ex.: BKPF/BSEG + BSIS).

Isso causa duplicação, mais espaço em disco e mais esforço de administração.

#### **2.Risco de inconsistências**

Se a index table não for atualizada corretamente (por erro em batch job ou falha de sistema), os relatórios mostram valores diferentes das basic tables.

Resultado: perda de confiança nos dados.

#### **3.Complexidade nos relatórios**

Relatórios precisavam “decidir” de onde buscar: basic table ou index table.

Muitas vezes, relatórios grandes tinham que consultar ambas.

#### **4.Performance limitada em consultas novas**

Index tables aceleram só consultas pré-definidas.

Se o usuário quisesse um relatório diferente, que não estava planejado, o sistema precisava acessar as basic tables mesmo assim → lento de novo.

#### **5.Carga de manutenção**

Jobs noturnos/batch precisavam atualizar as index tables.

Isso aumentava o tempo de processamento em background e exigia administração constante.

## 🔹 Como o S/4HANA resolve

Com o SAP HANA (in-memory + column store):

- Não é preciso manter index tables → os cálculos são feitos em tempo real sobre as basic tables.

- Elimina redundância → menos tabelas, menos inconsistência.

- Introduz CDS Views (Core Data Services) → relatórios e analytics customizados sem cópias extras.

- Universal Journal (ACDOCA) substitui dezenas de index tables de FI/CO.

📌 Resumo para anotações:

- Index tables eram um remendo técnico para bancos de dados lentos no ECC.

- Problemas: redundância, inconsistência, complexidade, manutenção pesada e limitação em relatórios novos.

- No S/4HANA → index tables foram eliminadas. Agora temos basic tables + views (CDS Views, Embedded Analytics) que dão performance em tempo real sem cópias redundantes.


### 📑 Anotações – OLTP x OLAP no contexto SAP

#### 🔹 O que é OLTP (Online Transaction Processing)

- Processamento transacional do dia a dia.

- Focado em registrar operações de forma rápida e confiável.

- Exemplo no SAP: criar pedidos de vendas, registrar notas fiscais, lançamentos contábeis.

- Basic tables (VBAK, VBAP, BKPF, MARA) são OLTP → armazenam os dados das transações.

#### 🔹 O que é OLAP (Online Analytical Processing)

- Processamento analítico, usado para relatórios, análises, estatísticas e tomada de decisão.

- Focado em consultar e agregar grandes volumes de dados.

- Exemplo no SAP: relatório de vendas por região, consolidação de custos, análises financeiras.

- Index tables e LIS tables no ECC existiam para tentar viabilizar o OLAP dentro de um sistema originalmente voltado para OLTP.

#### 🔹 O problema no ECC

- ECC foi projetado para OLTP.

- Usuários também precisavam de OLAP (relatórios, estatísticas).

- Mas os bancos de dados relacionais não eram bons em OLAP → lentos em agregações, somatórios, joins complexos.

- Solução paliativa: criar Index tables e LIS tables (redundantes).

- Funcionavam só para relatórios já planejados.

- Não resolviam consultas ad-hoc (novas perguntas).

- Introduziam problemas de redundância e inconsistência (como já vimos).

#### 🔹 O que muda no S/4HANA

O SAP HANA é um banco in-memory capaz de suportar OLTP e OLAP juntos (conceito de HTAP – Hybrid Transactional and Analytical Processing).

Isso significa:

- Você grava a transação (OLTP) → vai direto para a basic table (ex.: ACDOCA).

- No mesmo banco, você pode consultar relatórios agregados (OLAP) em tempo real, sem precisar de index/LIS.

- Ferramentas usadas: CDS Views, Embedded Analytics, Fiori apps.

📌 Resumo para anotações

- OLTP = transações (VBAK, VBAP, BKPF → basic tables).

- OLAP = relatórios/analytics.

- No ECC: OLTP (basic tables) + OLAP (via index/LIS redundantes).

- Problema: redundância, inconsistência, manutenção, limitação em relatórios novos.

- No S/4HANA: OLTP + OLAP juntos no mesmo banco (HANA) → elimina index/LIS.

- Agora temos uma fonte única de verdade (ACDOCA, MARA, VBAK, etc.) + CDS Views para relatórios.