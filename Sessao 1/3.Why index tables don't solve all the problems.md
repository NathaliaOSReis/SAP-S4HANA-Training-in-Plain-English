## ğŸ”¹ Contexto

- No SAP ECC, os bancos de dados relacionais (Oracle, SQL Server, DB2 etc.) eram lentos para processar relatÃ³rios diretamente das basic tables (como VBAK, BKPF, MARA).

- Para melhorar performance, foram criadas as index tables, que guardavam cÃ³pias prÃ©-calculadas ou resumidas de dados.

- Exemplo: BSIS (FI), KONV (SD), VBRK/VBRP (Billing).

## ğŸ”¹ Por que index tables nÃ£o resolvem tudo

#### **1. RedundÃ¢ncia de dados**

O mesmo dado aparece em mÃºltiplas tabelas (ex.: BKPF/BSEG + BSIS).

Isso causa duplicaÃ§Ã£o, mais espaÃ§o em disco e mais esforÃ§o de administraÃ§Ã£o.

#### **2.Risco de inconsistÃªncias**

Se a index table nÃ£o for atualizada corretamente (por erro em batch job ou falha de sistema), os relatÃ³rios mostram valores diferentes das basic tables.

Resultado: perda de confianÃ§a nos dados.

#### **3.Complexidade nos relatÃ³rios**

RelatÃ³rios precisavam â€œdecidirâ€ de onde buscar: basic table ou index table.

Muitas vezes, relatÃ³rios grandes tinham que consultar ambas.

#### **4.Performance limitada em consultas novas**

Index tables aceleram sÃ³ consultas prÃ©-definidas.

Se o usuÃ¡rio quisesse um relatÃ³rio diferente, que nÃ£o estava planejado, o sistema precisava acessar as basic tables mesmo assim â†’ lento de novo.

#### **5.Carga de manutenÃ§Ã£o**

Jobs noturnos/batch precisavam atualizar as index tables.

Isso aumentava o tempo de processamento em background e exigia administraÃ§Ã£o constante.

## ğŸ”¹ Como o S/4HANA resolve

Com o SAP HANA (in-memory + column store):

- NÃ£o Ã© preciso manter index tables â†’ os cÃ¡lculos sÃ£o feitos em tempo real sobre as basic tables.

- Elimina redundÃ¢ncia â†’ menos tabelas, menos inconsistÃªncia.

- Introduz CDS Views (Core Data Services) â†’ relatÃ³rios e analytics customizados sem cÃ³pias extras.

- Universal Journal (ACDOCA) substitui dezenas de index tables de FI/CO.

ğŸ“Œ Resumo para anotaÃ§Ãµes:

- Index tables eram um remendo tÃ©cnico para bancos de dados lentos no ECC.

- Problemas: redundÃ¢ncia, inconsistÃªncia, complexidade, manutenÃ§Ã£o pesada e limitaÃ§Ã£o em relatÃ³rios novos.

- No S/4HANA â†’ index tables foram eliminadas. Agora temos basic tables + views (CDS Views, Embedded Analytics) que dÃ£o performance em tempo real sem cÃ³pias redundantes.


### ğŸ“‘ AnotaÃ§Ãµes â€“ OLTP x OLAP no contexto SAP

#### ğŸ”¹ O que Ã© OLTP (Online Transaction Processing)

- Processamento transacional do dia a dia.

- Focado em registrar operaÃ§Ãµes de forma rÃ¡pida e confiÃ¡vel.

- Exemplo no SAP: criar pedidos de vendas, registrar notas fiscais, lanÃ§amentos contÃ¡beis.

- Basic tables (VBAK, VBAP, BKPF, MARA) sÃ£o OLTP â†’ armazenam os dados das transaÃ§Ãµes.

#### ğŸ”¹ O que Ã© OLAP (Online Analytical Processing)

- Processamento analÃ­tico, usado para relatÃ³rios, anÃ¡lises, estatÃ­sticas e tomada de decisÃ£o.

- Focado em consultar e agregar grandes volumes de dados.

- Exemplo no SAP: relatÃ³rio de vendas por regiÃ£o, consolidaÃ§Ã£o de custos, anÃ¡lises financeiras.

- Index tables e LIS tables no ECC existiam para tentar viabilizar o OLAP dentro de um sistema originalmente voltado para OLTP.

#### ğŸ”¹ O problema no ECC

- ECC foi projetado para OLTP.

- UsuÃ¡rios tambÃ©m precisavam de OLAP (relatÃ³rios, estatÃ­sticas).

- Mas os bancos de dados relacionais nÃ£o eram bons em OLAP â†’ lentos em agregaÃ§Ãµes, somatÃ³rios, joins complexos.

- SoluÃ§Ã£o paliativa: criar Index tables e LIS tables (redundantes).

- Funcionavam sÃ³ para relatÃ³rios jÃ¡ planejados.

- NÃ£o resolviam consultas ad-hoc (novas perguntas).

- Introduziam problemas de redundÃ¢ncia e inconsistÃªncia (como jÃ¡ vimos).

#### ğŸ”¹ O que muda no S/4HANA

O SAP HANA Ã© um banco in-memory capaz de suportar OLTP e OLAP juntos (conceito de HTAP â€“ Hybrid Transactional and Analytical Processing).

Isso significa:

- VocÃª grava a transaÃ§Ã£o (OLTP) â†’ vai direto para a basic table (ex.: ACDOCA).

- No mesmo banco, vocÃª pode consultar relatÃ³rios agregados (OLAP) em tempo real, sem precisar de index/LIS.

- Ferramentas usadas: CDS Views, Embedded Analytics, Fiori apps.

ğŸ“Œ Resumo para anotaÃ§Ãµes

- OLTP = transaÃ§Ãµes (VBAK, VBAP, BKPF â†’ basic tables).

- OLAP = relatÃ³rios/analytics.

- No ECC: OLTP (basic tables) + OLAP (via index/LIS redundantes).

- Problema: redundÃ¢ncia, inconsistÃªncia, manutenÃ§Ã£o, limitaÃ§Ã£o em relatÃ³rios novos.

- No S/4HANA: OLTP + OLAP juntos no mesmo banco (HANA) â†’ elimina index/LIS.

- Agora temos uma fonte Ãºnica de verdade (ACDOCA, MARA, VBAK, etc.) + CDS Views para relatÃ³rios.