## ğŸ“’ Business Partner â€“ Data Model (DB Tables)

### 1ï¸âƒ£ RevisÃ£o rÃ¡pida

JÃ¡ vimos:

- O que Ã© um Business Partner (BP).

- Como criar BP genÃ©rico.

- Como estender BP com roles para criar Customer ou Vendor.

Agora vamos ver o que acontece por trÃ¡s dos panos no banco de dados.

### 2ï¸âƒ£ Customer/Vendor Master â€“ Estrutura Antiga

**Customer Master:**

Tabela | Dados armazenados
-------|-----------------
KNA1   | General Data
KNB1   | Company / Finance Data
KNVV   | Sales Data


**Vendor Master:**

Tabela | Dados armazenados
-------|-----------------
LFA1   | General Data
LFB1   | Company Code / Finance Data
LFM1   | Purchasing Data


- Cada Customer/Vendor tinha trÃªs views, espalhadas em diferentes tabelas.

### 3ï¸âƒ£ Business Partner â€“ Estrutura Nova

- BP Ã© uma shell: contÃ©m dados gerais (nome, endereÃ§o, contato).

- Tabela principal: BUT000 (zero zero zero) â†’ armazena dados gerais de todos os BPs.

- CriaÃ§Ã£o do BP nÃ£o cria Customer/Vendor imediatamente.

### 4ï¸âƒ£ ExtensÃ£o do BP para Customer/Vendor

- Quando um BP Ã© estendido com roles, as tabelas clÃ¡ssicas do Customer/Vendor passam a ser preenchidas:

**Customer**

| Role   | Tabela preenchida             | Exemplo                                  |
| ------ | ----------------------------- | ---------------------------------------- |
| FLCU00 | KNB1 (Company Code / Finance) | Contas a receber, recon account          |
| FLCU01 | KNVV (Sales Data)             | Sales Area, Shipping, Tax, Partner Func. |

**Vendor**

| Role   | Tabela preenchida             | Exemplo                       |
| ------ | ----------------------------- | ----------------------------- |
| FLVN00 | LFB1 (Finance / Company Code) | Contas a pagar, recon account |
| FLVN01 | LFM1 (Purchasing)             | Purchase Org, Currency, Terms |


- BP Number (ex.: 63) â†’ nÃºmero do BP genÃ©rico

- Customer/Vendor Number â†’ nÃºmero especÃ­fico criado ao estender o BP

- Pode ser o mesmo nÃºmero do BP ou diferente, dependendo da configuraÃ§Ã£o.

### 5ï¸âƒ£ Passo a passo â€“ Exemplo Vendor

- Criar BP genÃ©rico (ex.: Bank of America, BP 63) â†’ armazenado em BUT000.

- Adicionar Role FLVN00 (Finance) â†’ dados preenchidos em LFB1 â†’ Vendor Number criado (ex.: 100013).

- Adicionar Role FLVN01 (Purchasing) â†’ dados preenchidos em LFM1.

ObservaÃ§Ã£o: atÃ© o BP ser estendido com roles, as tabelas antigas de Customer/Vendor permanecem vazias.

### 6ï¸âƒ£ Pontos importantes

- BP Ã© shell genÃ©rica â†’ Customer/Vendor Ã© criado somente ao estender roles.

- Cada role ativa abas e tabelas correspondentes.

- BP permite integraÃ§Ã£o simplificada e compatibilidade com S/4HANA.

- Tabelas antigas ainda sÃ£o utilizadas para compatibilidade, programas legados nÃ£o falham.

- AlÃ©m das tabelas principais, existem outras tabelas relacionadas:

- Tax Tables

- VAT Registration Tables

- Outros dados especÃ­ficos de Customer/Vendor

### 7ï¸âƒ£ Fluxo resumido (numÃ©rico)
```
1ï¸âƒ£ Criar BP genÃ©rico â†’ BUT000<br>
2ï¸âƒ£ Extender BP como Customer â†’ FLCU00 / FLCU01 â†’ KNB1 / KNVV<br>
3ï¸âƒ£ Extender BP como Vendor   â†’ FLVN00 / FLVN01 â†’ LFB1 / LFM1

```

## âœ… Resumo visual

```
BP (BUT000)
   â”‚
   â”œâ”€â”€ Customer Role
   â”‚      â”œâ”€ FLCU00 â†’ KNB1 (Finance)
   â”‚      â””â”€ FLCU01 â†’ KNVV (Sales)
   â”‚
   â””â”€â”€ Vendor Role
          â”œâ”€ FLVN00 â†’ LFB1 (Finance)
          â””â”€ FLVN01 â†’ LFM1 (Purchasing)
```